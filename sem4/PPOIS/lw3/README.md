# Лабораторная работа 3

## Описание приложения

Super Mario Bros - копия оригинального пиксельного платформера Super Mario Bros. В игре пользователь управляет героем, который может перемещаться вправо-влево и прыгать. В игре присутвуют разрушаемые блоки, с которых может выпасть монета или подбираемый бонус. Цель игры - добраться до флага, что знаменует собой победу.

## Демонстрация работы

- Главное меню
![](https://github.com/oden73/ppois-2-2024/blob/%D0%9A%D0%B0%D1%80%D0%BF%D1%83%D0%BA_%D0%9C%D0%B0%D0%BA%D1%81%D0%B8%D0%BC_%D0%92%D0%B8%D1%82%D0%B0%D0%BB%D1%8C%D0%B5%D0%B2%D0%B8%D1%87/lw3/report_img/main_menu.png)

- Таблица рекордов
![](https://github.com/oden73/ppois-2-2024/blob/%D0%9A%D0%B0%D1%80%D0%BF%D1%83%D0%BA_%D0%9C%D0%B0%D0%BA%D1%81%D0%B8%D0%BC_%D0%92%D0%B8%D1%82%D0%B0%D0%BB%D1%8C%D0%B5%D0%B2%D0%B8%D1%87/lw3/report_img/scoreboard.png)

- Справка
![](https://github.com/oden73/ppois-2-2024/blob/%D0%9A%D0%B0%D1%80%D0%BF%D1%83%D0%BA_%D0%9C%D0%B0%D0%BA%D1%81%D0%B8%D0%BC_%D0%92%D0%B8%D1%82%D0%B0%D0%BB%D1%8C%D0%B5%D0%B2%D0%B8%D1%87/lw3/report_img/reference.png)

- Игровой процесс
![](https://github.com/oden73/ppois-2-2024/blob/%D0%9A%D0%B0%D1%80%D0%BF%D1%83%D0%BA_%D0%9C%D0%B0%D0%BA%D1%81%D0%B8%D0%BC_%D0%92%D0%B8%D1%82%D0%B0%D0%BB%D1%8C%D0%B5%D0%B2%D0%B8%D1%87/lw3/report_img/game.png)

- Сохранение рекорда
![](https://github.com/oden73/ppois-2-2024/blob/%D0%9A%D0%B0%D1%80%D0%BF%D1%83%D0%BA_%D0%9C%D0%B0%D0%BA%D1%81%D0%B8%D0%BC_%D0%92%D0%B8%D1%82%D0%B0%D0%BB%D1%8C%D0%B5%D0%B2%D0%B8%D1%87/lw3/report_img/new_record.png)

## Архитектура приложения

Приложение было написано с использованием библиотеки pygame-ce и pytmx.

Первая библиотека была использована для отображения уровня и объектов, вторая для обработки карты в .tmx формате. 

Карта уровня хранится в отдельном файле, она разбита на отдельные плитки, каждая плитка представляет из себя отдельный объект. В json файле хранится конфигурация карты, а именно: цвет неба, расположение флага, расположение труб; расположение мобов и позиция игрока, когда их необходимо создать.   

Хранение результатов происходит с помощью встроенной библиотеки pickle.

Непосредственное отображение игры происходит с помощью спрайтов. Было создано несколько дочерних от pygame.sprite.Sprite классов: статичный спрайт, движущийся спрайт, анимированный спрайт и движущийся анимированный спрайт. Иллюзия эффекта камеры происходит засчет дочернего от pygame.sprite.Group класса, который отображает только те спрайты, которые находятся в близости с позицией игрока. 

Какой экран отображается на данный момент решается в классе, который отвечает за игру, с помощью класса, который занимается менеджментом остальных экранов, кроме игрового. В зависимости от того, куда решит зайти игрок, в класс Game будет передаваться текущее состояние. В зависимости от него либо будет запущен уровень, либо менеджер экранов отрисует тот экран, который необходим.

Основная логика игрового процесса представлена в классе, который отвечает за уровень. В нем происходит первоначальная настройка уровня: загрузка карты, добавление игрока. В последствии в этом классе обрабатываются все события, которые могут произойти на карте. 

В игре присутствует отсчет времени: чем больше времени осталось, когда игрок победил, тем больше ему дадут очков. Если у игрока закончится время, то игра завершится, а результат не будет записан.
